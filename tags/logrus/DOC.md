# ctx_logrus
`import "github.com/improbable-eng/go-httpwares/tags/logrus"`

* [Overview](#pkg-overview)
* [Imported Packages](#pkg-imports)
* [Index](#pkg-index)
* [Examples](#pkg-examples)

## <a name="pkg-overview">Overview</a>
`ctx_logrus` is a ctxlogger that is backed by logrus
It accepts a user-configured `logrus.Logger` that will be used for logging. The same `logrus.Logger` will
be populated into the `context.Context` passed into httphandler code.
You can use `ctx_logrus.Extract` to log into a request-scoped `logrus.Logger` instance in your handler code.
As `ctx_logrus.Extract` will iterate all tags on from `http_ctxtags` it is therefore expensive so it is advised that you
extract once at the start of the function from the context and reuse it for the remainder of the function (see examples).
Please see examples and tests for examples of use.

## <a name="pkg-imports">Imported Packages</a>

- [github.com/improbable-eng/go-httpwares/tags](./..)
- [github.com/sirupsen/logrus](https://godoc.org/github.com/sirupsen/logrus)
- [golang.org/x/net/context](https://godoc.org/golang.org/x/net/context)

## <a name="pkg-index">Index</a>
* [func Extract(ctx context.Context) \*logrus.Entry](#Extract)
* [func ToContext(ctx context.Context, entry \*logrus.Entry) context.Context](#ToContext)

#### <a name="pkg-examples">Examples</a>
* [Extract](#example_Extract)

#### <a name="pkg-files">Package files</a>
[context.go](./context.go) [doc.go](./doc.go) [noop.go](./noop.go) 

## <a name="Extract">func</a> [Extract](./context.go#L22)
``` go
func Extract(ctx context.Context) *logrus.Entry
```
Extract takes the call-scoped logrus.Entry from http_ctxtags middleware.

The logger will have fields pre-populated using http_ctxtags.

If the http_logrus middleware wasn't used, a no-op `logrus.Entry` is returned. This makes it safe to use regardless.

#### Example:

<details>
<summary>Click to expand code.</summary>

```go
ctx := context.Background()
// Add fields the ctxtags of the request which will be added to all extracted loggers.
http_ctxtags.Extract(ctx).Set("custom_tags.string", "something").Set("custom_tags.int", 1337)
// Extract a single request-scoped logrus.Logger and log messages.
l := ctx_logrus.Extract(ctx)
l.Info("some log message")
l.Info("another log message")
```

</details>

## <a name="ToContext">func</a> [ToContext](./context.go#L33)
``` go
func ToContext(ctx context.Context, entry *logrus.Entry) context.Context
```
ToContext adds the logrus.Entry to the context for extraction later.
Returning the new context that has been created.

- - -
Generated by [godoc2ghmd](https://github.com/GandalfUK/godoc2ghmd)